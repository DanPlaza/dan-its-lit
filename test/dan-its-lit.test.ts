import { DanItsLit } from '../src/dan-its-lit';

import { fixture, assert } from '@open-wc/testing';
import { html } from 'lit/static-html.js';

describe('dan-its-lit', () => {
  it('is defined', () => {
    const el = document.createElement('dan-its-lit');
    assert.instanceOf(el, DanItsLit);
  });

  it('renders with default values', async () => {
    const el = await fixture(html`<dan-its-lit></dan-its-lit>`);
    assert.shadowDom.equal(
      el,
      `
      <button type="button">
        <img class="button__icon" alt="Dan's fire icon" src="data:image/svg+xml,%3c%3fxml version=\'1.0\' encoding=\'UTF-8\' standalone=\'no\'%3f%3e%3c!-- Created with Inkscape (http://www.inkscape.org/) --%3e%3csvg width=\'58.737263mm\' height=\'62.138622mm\' viewBox=\'0 0 58.737263 62.138622\' version=\'1.1\' id=\'svg5\' inkscape:version=\'1.2.1 (9c6d41e4%2c 2022-07-14)\' sodipodi:docname=\'fire-icon.svg\' xmlns:inkscape=\'http://www.inkscape.org/namespaces/inkscape\' xmlns:sodipodi=\'http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\' xmlns=\'http://www.w3.org/2000/svg\' xmlns:svg=\'http://www.w3.org/2000/svg\'%3e %3csodipodi:namedview id=\'namedview7\' pagecolor=\'white\' bordercolor=\'black\' borderopacity=\'0.25\' inkscape:showpageshadow=\'2\' inkscape:pageopacity=\'0.0\' inkscape:pagecheckerboard=\'0\' inkscape:deskcolor=\'%23d1d1d1\' inkscape:document-units=\'mm\' showgrid=\'false\' inkscape:zoom=\'1.9449614\' inkscape:cx=\'164.78476\' inkscape:cy=\'197.94737\' inkscape:window-width=\'1792\' inkscape:window-height=\'1067\' inkscape:window-x=\'0\' inkscape:window-y=\'25\' inkscape:window-maximized=\'1\' inkscape:current-layer=\'layer1\' /%3e %3cdefs id=\'defs2\' /%3e %3cg inkscape:label=\'Layer 1\' inkscape:groupmode=\'layer\' id=\'layer1\' transform=\'translate(-44.990739%2c-94.346864)\'%3e %3cpath style=\'fill:%23666666%3bstroke-width:0.264583\' d=\'m 51.928537%2c100.06034 c 26.952101%2c1.76306 35.60375%2c13.37882 33.464674%2c29.65569 -2.568728%2c19.54622 -21.332416%2c18.56089 -31.832252%2c11.29093 18.111798%2c-12.87482 16.541536%2c-32.76402 -1.632422%2c-40.94662 z\' id=\'path2727\' sodipodi:nodetypes=\'cscc\' /%3e %3cpath style=\'fill:%23ffcc00%3bstroke-width:0.264583\' d=\'m 61.514715%2c103.51468 c 0%2c0 -15.881639%2c3.69483 -16.513718%2c24.28815 -0.519217%2c16.91624 8.746975%2c26.33734 28.800639%2c28.44063 19.847418%2c2.08166 29.245894%2c-9.5443 29.880664%2c-24.12053 1.10681%2c-25.41584 -18.257407%2c-37.776066 -18.257407%2c-37.776066 0%2c0 11.521706%2c18.639286 6.121587%2c27.999486 -5.40012%2c9.36021 -11.571549%2c1.84991 -12.344725%2c-4.26373 -0.796791%2c-6.30037 1.862325%2c-14.00536 3.328009%2c-16.30481 -4.136057%2c2.88278 -10.414683%2c8.94599 -11.032469%2c20.00934 -0.275049%2c4.92559 0.919441%2c8.86502 -2.848483%2c10.4072 -4.460418%2c1.82561 -6.02035%2c-4.33679 -6.367431%2c-7.63159 -0.534045%2c-5.06963 2.861792%2c-10.52383 7.135545%2c-13.5263 -7.146269%2c-1.09811 -16.79704%2c6.27964 -16.144004%2c19.7125 -4.233738%2c-12.63232 1.417483%2c-20.88306 8.241793%2c-27.23428 z\' id=\'path799\' sodipodi:nodetypes=\'cssscsscssaccc\' /%3e %3ccircle id=\'path1025\' style=\'fill:%23ffcc00%3bstroke:black%3bstroke-width:0.264583\' cx=\'74.139214\' cy=\'125.0164\' r=\'0.018119764\' /%3e %3ccircle id=\'path1027\' style=\'fill:%23ffcc00%3bstroke:black%3bstroke-width:0.264583\' cx=\'78.084236\' cy=\'136.57941\' r=\'0.018119764\' /%3e %3cpath style=\'fill:%23d45500%3bstroke-width:0.264583\' d=\'m 75.907673%2c126.37676 c 4.080706%2c5.01796 5.114245%2c7.27894 3.945022%2c11.69903 -6.064127%2c6.22642 -19.601279%2c1.91964 -20.949429%2c-9.6585 -6.346927%2c21.77689 14.187643%2c29.30114 28.839474%2c20.81339 8.534978%2c-4.94428 13.42738%2c-13.63609 9.658504%2c-26.11877 -0.524003%2c6.43671 -3.028286%2c9.86458 -8.434187%2c11.1549 -1.44277%2c-4.19074 -7.666525%2c-7.56879 -13.059384%2c-7.89005 z\' id=\'path1147\' sodipodi:nodetypes=\'cccsccc\' /%3e %3c/g%3e%3c/svg%3e" /> | <span class="label">Light it up!</span>
      </button>
    `
    );
  });

  it('handles one click', async () => {
    const el = (await fixture(html`<dan-its-lit allows-one-time-click="true"></dan-its-lit>`)) as DanItsLit;
    const button = el.shadowRoot!.querySelector('button')!;
    button.click();
    await el.updateComplete;
    assert.shadowDom.equal(
      el,
      `
      <button type="button">
        <img alt="Dan's fire icon" class="button__icon" src="data:image/svg+xml,%3c%3fxml version=\'1.0\' encoding=\'UTF-8\' standalone=\'no\'%3f%3e%3c!-- Created with Inkscape (http://www.inkscape.org/) --%3e%3csvg width=\'58.737263mm\' height=\'62.138622mm\' viewBox=\'0 0 58.737263 62.138622\' version=\'1.1\' id=\'svg5\' inkscape:version=\'1.2.1 (9c6d41e4%2c 2022-07-14)\' sodipodi:docname=\'fire-icon.svg\' xmlns:inkscape=\'http://www.inkscape.org/namespaces/inkscape\' xmlns:sodipodi=\'http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\' xmlns=\'http://www.w3.org/2000/svg\' xmlns:svg=\'http://www.w3.org/2000/svg\'%3e %3csodipodi:namedview id=\'namedview7\' pagecolor=\'white\' bordercolor=\'black\' borderopacity=\'0.25\' inkscape:showpageshadow=\'2\' inkscape:pageopacity=\'0.0\' inkscape:pagecheckerboard=\'0\' inkscape:deskcolor=\'%23d1d1d1\' inkscape:document-units=\'mm\' showgrid=\'false\' inkscape:zoom=\'1.9449614\' inkscape:cx=\'164.78476\' inkscape:cy=\'197.94737\' inkscape:window-width=\'1792\' inkscape:window-height=\'1067\' inkscape:window-x=\'0\' inkscape:window-y=\'25\' inkscape:window-maximized=\'1\' inkscape:current-layer=\'layer1\' /%3e %3cdefs id=\'defs2\' /%3e %3cg inkscape:label=\'Layer 1\' inkscape:groupmode=\'layer\' id=\'layer1\' transform=\'translate(-44.990739%2c-94.346864)\'%3e %3cpath style=\'fill:%23666666%3bstroke-width:0.264583\' d=\'m 51.928537%2c100.06034 c 26.952101%2c1.76306 35.60375%2c13.37882 33.464674%2c29.65569 -2.568728%2c19.54622 -21.332416%2c18.56089 -31.832252%2c11.29093 18.111798%2c-12.87482 16.541536%2c-32.76402 -1.632422%2c-40.94662 z\' id=\'path2727\' sodipodi:nodetypes=\'cscc\' /%3e %3cpath style=\'fill:%23ffcc00%3bstroke-width:0.264583\' d=\'m 61.514715%2c103.51468 c 0%2c0 -15.881639%2c3.69483 -16.513718%2c24.28815 -0.519217%2c16.91624 8.746975%2c26.33734 28.800639%2c28.44063 19.847418%2c2.08166 29.245894%2c-9.5443 29.880664%2c-24.12053 1.10681%2c-25.41584 -18.257407%2c-37.776066 -18.257407%2c-37.776066 0%2c0 11.521706%2c18.639286 6.121587%2c27.999486 -5.40012%2c9.36021 -11.571549%2c1.84991 -12.344725%2c-4.26373 -0.796791%2c-6.30037 1.862325%2c-14.00536 3.328009%2c-16.30481 -4.136057%2c2.88278 -10.414683%2c8.94599 -11.032469%2c20.00934 -0.275049%2c4.92559 0.919441%2c8.86502 -2.848483%2c10.4072 -4.460418%2c1.82561 -6.02035%2c-4.33679 -6.367431%2c-7.63159 -0.534045%2c-5.06963 2.861792%2c-10.52383 7.135545%2c-13.5263 -7.146269%2c-1.09811 -16.79704%2c6.27964 -16.144004%2c19.7125 -4.233738%2c-12.63232 1.417483%2c-20.88306 8.241793%2c-27.23428 z\' id=\'path799\' sodipodi:nodetypes=\'cssscsscssaccc\' /%3e %3ccircle id=\'path1025\' style=\'fill:%23ffcc00%3bstroke:black%3bstroke-width:0.264583\' cx=\'74.139214\' cy=\'125.0164\' r=\'0.018119764\' /%3e %3ccircle id=\'path1027\' style=\'fill:%23ffcc00%3bstroke:black%3bstroke-width:0.264583\' cx=\'78.084236\' cy=\'136.57941\' r=\'0.018119764\' /%3e %3cpath style=\'fill:%23d45500%3bstroke-width:0.264583\' d=\'m 75.907673%2c126.37676 c 4.080706%2c5.01796 5.114245%2c7.27894 3.945022%2c11.69903 -6.064127%2c6.22642 -19.601279%2c1.91964 -20.949429%2c-9.6585 -6.346927%2c21.77689 14.187643%2c29.30114 28.839474%2c20.81339 8.534978%2c-4.94428 13.42738%2c-13.63609 9.658504%2c-26.11877 -0.524003%2c6.43671 -3.028286%2c9.86458 -8.434187%2c11.1549 -1.44277%2c-4.19074 -7.666525%2c-7.56879 -13.059384%2c-7.89005 z\' id=\'path1147\' sodipodi:nodetypes=\'cccsccc\' /%3e %3c/g%3e%3c/svg%3e" /> x1 | <span class="label">Heating up!</span>
      </button>
    `
    );

    // If the button is clicked once more. The counter should decrease.
    button.click();
    await el.updateComplete;
    assert.shadowDom.equal(
      el,
      `
      <button type="button">
        <img alt="Dan's fire icon" class="button__icon" src="data:image/svg+xml,%3c%3fxml version=\'1.0\' encoding=\'UTF-8\' standalone=\'no\'%3f%3e%3c!-- Created with Inkscape (http://www.inkscape.org/) --%3e%3csvg width=\'58.737263mm\' height=\'62.138622mm\' viewBox=\'0 0 58.737263 62.138622\' version=\'1.1\' id=\'svg5\' inkscape:version=\'1.2.1 (9c6d41e4%2c 2022-07-14)\' sodipodi:docname=\'fire-icon.svg\' xmlns:inkscape=\'http://www.inkscape.org/namespaces/inkscape\' xmlns:sodipodi=\'http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\' xmlns=\'http://www.w3.org/2000/svg\' xmlns:svg=\'http://www.w3.org/2000/svg\'%3e %3csodipodi:namedview id=\'namedview7\' pagecolor=\'white\' bordercolor=\'black\' borderopacity=\'0.25\' inkscape:showpageshadow=\'2\' inkscape:pageopacity=\'0.0\' inkscape:pagecheckerboard=\'0\' inkscape:deskcolor=\'%23d1d1d1\' inkscape:document-units=\'mm\' showgrid=\'false\' inkscape:zoom=\'1.9449614\' inkscape:cx=\'164.78476\' inkscape:cy=\'197.94737\' inkscape:window-width=\'1792\' inkscape:window-height=\'1067\' inkscape:window-x=\'0\' inkscape:window-y=\'25\' inkscape:window-maximized=\'1\' inkscape:current-layer=\'layer1\' /%3e %3cdefs id=\'defs2\' /%3e %3cg inkscape:label=\'Layer 1\' inkscape:groupmode=\'layer\' id=\'layer1\' transform=\'translate(-44.990739%2c-94.346864)\'%3e %3cpath style=\'fill:%23666666%3bstroke-width:0.264583\' d=\'m 51.928537%2c100.06034 c 26.952101%2c1.76306 35.60375%2c13.37882 33.464674%2c29.65569 -2.568728%2c19.54622 -21.332416%2c18.56089 -31.832252%2c11.29093 18.111798%2c-12.87482 16.541536%2c-32.76402 -1.632422%2c-40.94662 z\' id=\'path2727\' sodipodi:nodetypes=\'cscc\' /%3e %3cpath style=\'fill:%23ffcc00%3bstroke-width:0.264583\' d=\'m 61.514715%2c103.51468 c 0%2c0 -15.881639%2c3.69483 -16.513718%2c24.28815 -0.519217%2c16.91624 8.746975%2c26.33734 28.800639%2c28.44063 19.847418%2c2.08166 29.245894%2c-9.5443 29.880664%2c-24.12053 1.10681%2c-25.41584 -18.257407%2c-37.776066 -18.257407%2c-37.776066 0%2c0 11.521706%2c18.639286 6.121587%2c27.999486 -5.40012%2c9.36021 -11.571549%2c1.84991 -12.344725%2c-4.26373 -0.796791%2c-6.30037 1.862325%2c-14.00536 3.328009%2c-16.30481 -4.136057%2c2.88278 -10.414683%2c8.94599 -11.032469%2c20.00934 -0.275049%2c4.92559 0.919441%2c8.86502 -2.848483%2c10.4072 -4.460418%2c1.82561 -6.02035%2c-4.33679 -6.367431%2c-7.63159 -0.534045%2c-5.06963 2.861792%2c-10.52383 7.135545%2c-13.5263 -7.146269%2c-1.09811 -16.79704%2c6.27964 -16.144004%2c19.7125 -4.233738%2c-12.63232 1.417483%2c-20.88306 8.241793%2c-27.23428 z\' id=\'path799\' sodipodi:nodetypes=\'cssscsscssaccc\' /%3e %3ccircle id=\'path1025\' style=\'fill:%23ffcc00%3bstroke:black%3bstroke-width:0.264583\' cx=\'74.139214\' cy=\'125.0164\' r=\'0.018119764\' /%3e %3ccircle id=\'path1027\' style=\'fill:%23ffcc00%3bstroke:black%3bstroke-width:0.264583\' cx=\'78.084236\' cy=\'136.57941\' r=\'0.018119764\' /%3e %3cpath style=\'fill:%23d45500%3bstroke-width:0.264583\' d=\'m 75.907673%2c126.37676 c 4.080706%2c5.01796 5.114245%2c7.27894 3.945022%2c11.69903 -6.064127%2c6.22642 -19.601279%2c1.91964 -20.949429%2c-9.6585 -6.346927%2c21.77689 14.187643%2c29.30114 28.839474%2c20.81339 8.534978%2c-4.94428 13.42738%2c-13.63609 9.658504%2c-26.11877 -0.524003%2c6.43671 -3.028286%2c9.86458 -8.434187%2c11.1549 -1.44277%2c-4.19074 -7.666525%2c-7.56879 -13.059384%2c-7.89005 z\' id=\'path1147\' sodipodi:nodetypes=\'cccsccc\' /%3e %3c/g%3e%3c/svg%3e" /> | <span class="label">Light it up!</span>
      </button>
    `
    );
  });

  it('handles multiple clicks', async () => {
    const el = (await fixture(html`<dan-its-lit></dan-its-lit>`)) as DanItsLit;
    const button = el.shadowRoot!.querySelector('button')!;
    for (let i = 0; i < 5; i++) {
      button.click();
      await el.updateComplete;
    }
    assert.shadowDom.equal(
      el,
      `
      <button type="button">
        <img alt="Dan's fire icon" class="button__icon" src="data:image/svg+xml,%3c%3fxml version=\'1.0\' encoding=\'UTF-8\' standalone=\'no\'%3f%3e%3c!-- Created with Inkscape (http://www.inkscape.org/) --%3e%3csvg width=\'58.737263mm\' height=\'62.138622mm\' viewBox=\'0 0 58.737263 62.138622\' version=\'1.1\' id=\'svg5\' inkscape:version=\'1.2.1 (9c6d41e4%2c 2022-07-14)\' sodipodi:docname=\'fire-icon.svg\' xmlns:inkscape=\'http://www.inkscape.org/namespaces/inkscape\' xmlns:sodipodi=\'http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\' xmlns=\'http://www.w3.org/2000/svg\' xmlns:svg=\'http://www.w3.org/2000/svg\'%3e %3csodipodi:namedview id=\'namedview7\' pagecolor=\'white\' bordercolor=\'black\' borderopacity=\'0.25\' inkscape:showpageshadow=\'2\' inkscape:pageopacity=\'0.0\' inkscape:pagecheckerboard=\'0\' inkscape:deskcolor=\'%23d1d1d1\' inkscape:document-units=\'mm\' showgrid=\'false\' inkscape:zoom=\'1.9449614\' inkscape:cx=\'164.78476\' inkscape:cy=\'197.94737\' inkscape:window-width=\'1792\' inkscape:window-height=\'1067\' inkscape:window-x=\'0\' inkscape:window-y=\'25\' inkscape:window-maximized=\'1\' inkscape:current-layer=\'layer1\' /%3e %3cdefs id=\'defs2\' /%3e %3cg inkscape:label=\'Layer 1\' inkscape:groupmode=\'layer\' id=\'layer1\' transform=\'translate(-44.990739%2c-94.346864)\'%3e %3cpath style=\'fill:%23666666%3bstroke-width:0.264583\' d=\'m 51.928537%2c100.06034 c 26.952101%2c1.76306 35.60375%2c13.37882 33.464674%2c29.65569 -2.568728%2c19.54622 -21.332416%2c18.56089 -31.832252%2c11.29093 18.111798%2c-12.87482 16.541536%2c-32.76402 -1.632422%2c-40.94662 z\' id=\'path2727\' sodipodi:nodetypes=\'cscc\' /%3e %3cpath style=\'fill:%23ffcc00%3bstroke-width:0.264583\' d=\'m 61.514715%2c103.51468 c 0%2c0 -15.881639%2c3.69483 -16.513718%2c24.28815 -0.519217%2c16.91624 8.746975%2c26.33734 28.800639%2c28.44063 19.847418%2c2.08166 29.245894%2c-9.5443 29.880664%2c-24.12053 1.10681%2c-25.41584 -18.257407%2c-37.776066 -18.257407%2c-37.776066 0%2c0 11.521706%2c18.639286 6.121587%2c27.999486 -5.40012%2c9.36021 -11.571549%2c1.84991 -12.344725%2c-4.26373 -0.796791%2c-6.30037 1.862325%2c-14.00536 3.328009%2c-16.30481 -4.136057%2c2.88278 -10.414683%2c8.94599 -11.032469%2c20.00934 -0.275049%2c4.92559 0.919441%2c8.86502 -2.848483%2c10.4072 -4.460418%2c1.82561 -6.02035%2c-4.33679 -6.367431%2c-7.63159 -0.534045%2c-5.06963 2.861792%2c-10.52383 7.135545%2c-13.5263 -7.146269%2c-1.09811 -16.79704%2c6.27964 -16.144004%2c19.7125 -4.233738%2c-12.63232 1.417483%2c-20.88306 8.241793%2c-27.23428 z\' id=\'path799\' sodipodi:nodetypes=\'cssscsscssaccc\' /%3e %3ccircle id=\'path1025\' style=\'fill:%23ffcc00%3bstroke:black%3bstroke-width:0.264583\' cx=\'74.139214\' cy=\'125.0164\' r=\'0.018119764\' /%3e %3ccircle id=\'path1027\' style=\'fill:%23ffcc00%3bstroke:black%3bstroke-width:0.264583\' cx=\'78.084236\' cy=\'136.57941\' r=\'0.018119764\' /%3e %3cpath style=\'fill:%23d45500%3bstroke-width:0.264583\' d=\'m 75.907673%2c126.37676 c 4.080706%2c5.01796 5.114245%2c7.27894 3.945022%2c11.69903 -6.064127%2c6.22642 -19.601279%2c1.91964 -20.949429%2c-9.6585 -6.346927%2c21.77689 14.187643%2c29.30114 28.839474%2c20.81339 8.534978%2c-4.94428 13.42738%2c-13.63609 9.658504%2c-26.11877 -0.524003%2c6.43671 -3.028286%2c9.86458 -8.434187%2c11.1549 -1.44277%2c-4.19074 -7.666525%2c-7.56879 -13.059384%2c-7.89005 z\' id=\'path1147\' sodipodi:nodetypes=\'cccsccc\' /%3e %3c/g%3e%3c/svg%3e" /> x5 | <span class="label">Fire rises!</span>
      </button>
    `
    );
  });
});